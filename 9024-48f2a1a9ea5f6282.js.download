"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9024],{64955:function(e,n,l){l.d(n,{Z:function(){return a}});var t=l(85893);l(67294);function a(e){var n=e.text,l=e.className,a=void 0===l?"":l,s=e.color,i=void 0===s?"blue":s,o=e.display,r=void 0===o?"inline-block":o,c=e.withDot,d=void 0!==c&&c;return n?(0,t.jsxs)("div",{className:"".concat(r," badge bg-").concat(i,"-100 ").concat(a),children:[d&&(0,t.jsx)("span",{className:"badge bg-".concat(i,"-400")}),(0,t.jsx)("span",{className:"text-".concat(i,"-800"),children:n})]}):null}},46902:function(e,n,l){var t=l(85893),a=l(3732),s=l(18362),i=l(11163);n.Z=function(e){var n=e.onAction,l=e.onClose,o=e.visible,r=(0,i.useRouter)();return(0,t.jsx)(s.Z,{visible:o,context:{context:"custom_domain",page:r.pathname},image:(0,a.sd)("paywalls/pw-upgrade-domain-pro-bg.png"),title:"Upgrade to customize your domain",description:"A professional domain helps you convert more leads to customers. Upgrade your account and get a free custom domain included with your plan.",buttonTitle:"View Plans",buttonAction:n,featTitle:"Upgrade to premium and also get:",features:["More website pages","Premium website features","CRM and agents tools","Invoices and payment tracking"],bgColor:"bg-gray-900",closeColor:"text-white",onClose:function(){l()}})}},86383:function(e,n,l){l.d(n,{Z:function(){return f}});var t=l(14924),a=l(26042),s=l(69396),i=l(85893),o=l(67294),r=l(11355),c=l(40410),d=l(51121),u=l(3732),m=l(80360);function f(e){var n,l,f=e.contactDetails,v=e.setContactDetails,x=e.setValidForm,p=e.locations,h=e.show,g=(0,o.useRef)(null),y=(0,o.useState)({}),j=y[0],w=y[1],b=function(e){var n=null===e||void 0===e?void 0:e.match(/[^\x00-\x7F]/g,"");return!((null===n||void 0===n?void 0:n.length)>0)};return(0,o.useEffect)((function(){if(w({}),f){var e=Object.keys(f);x(!0);var n=!0,l=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done);n=!0){var d=o.value;if("address2"!==d&&"durableAsContact"!==d&&(!f[d]||""===f[d]))return w((0,s.Z)((0,a.Z)({},j),(0,t.Z)({},d,!0))),void x(!1)}}catch(m){l=!0,i=m}finally{try{n||null==r.return||r.return()}finally{if(l)throw i}}if((0,c.UL)(null===f||void 0===f?void 0:f.country.toUpperCase())&&!(0,c.OS)(null===f||void 0===f?void 0:f.postalCode,null===f||void 0===f?void 0:f.country.toUpperCase())&&(w((0,s.Z)((0,a.Z)({},j),{postalCode:"Invalid postal code"})),x(!1)),!b(null===f||void 0===f?void 0:f.firstName)||!b(null===f||void 0===f?void 0:f.lastName))return void x(!1);(0,u.oH)(null===f||void 0===f?void 0:f.email)||x(!1)}}),[f]),(0,o.useEffect)((function(){setTimeout((function(){g.current&&g.current.focus()}),300)}),[]),(0,i.jsx)(r.u,{as:o.Fragment,show:h,appear:!0,enter:"transition-all duration-600",enterFrom:"opacity-0 -translate-y-10",enterTo:"opacity-100 translate-y-0",leave:"transition-all duration-600",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 -translate-y-10",children:(0,i.jsxs)("div",{className:"flex flex-col gap-4 pb-2",children:[f.country,(0,i.jsxs)("div",{className:"flex flex-row flex-wrap gap-4 ",children:[(0,i.jsxs)("div",{className:"flex flex-col md:flex-row w-full justify-between gap-2",children:[(0,i.jsx)(d.Z,{className:"flex-1",ref:g,error:!b(null===f||void 0===f?void 0:f.firstName)&&"Invalid special character",onChange:function(e){return v((0,s.Z)((0,a.Z)({},f),{firstName:e}))},value:(null===f||void 0===f?void 0:f.firstName)||"",label:"First name",placeholder:"First name"}),(0,i.jsx)(d.Z,{className:"flex-1",error:!b(null===f||void 0===f?void 0:f.lastName)&&"Invalid special character",onChange:function(e){return v((0,s.Z)((0,a.Z)({},f),{lastName:e}))},value:(null===f||void 0===f?void 0:f.lastName)||"",label:"Last name",placeholder:"Last name"})]}),(0,i.jsxs)("div",{className:"flex flex-col md:flex-row w-full justify-between gap-2",children:[(0,i.jsx)(d.Z,{className:"flex-1",error:!(0,u.oH)(null===f||void 0===f?void 0:f.email)&&"Invalid email",onChange:function(e){return v((0,s.Z)((0,a.Z)({},f),{email:e}))},value:(null===f||void 0===f?void 0:f.email)||"",label:"Email",placeholder:"Email"}),(0,i.jsxs)("div",{className:"flex-1 flex flex-col md:flex-row gap-2",children:[(0,i.jsx)(m.Z,{className:"w-full md:w-1/2",value:p.find((function(e){var n,l;return(null===(n=e.code)||void 0===n?void 0:n.toUpperCase())===(null===f||void 0===f||null===(l=f.countryPhoneCode)||void 0===l?void 0:l.toUpperCase())})),onChange:function(e){return v((0,s.Z)((0,a.Z)({},f),{countryPhoneCode:e.code}))},values:p||[],label:"Code",hasFilter:!0}),(0,i.jsx)(d.Z,{type:"text",onChange:function(e){return v((0,s.Z)((0,a.Z)({},f),{phoneNumber:e.replace(/[^0-9 ]/g,"")}))},value:(null===f||void 0===f||null===(n=f.phoneNumber)||void 0===n?void 0:n.replace(/[^a-zA-Z0-9 ]/g,""))||"",label:"Phone number",placeholder:"Phone number"})]})]})]}),(0,i.jsxs)("div",{className:"flex flex-row flex-wrap gap-4 ",children:[(0,i.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:"Address"}),(0,i.jsxs)("div",{className:"flex flex-col md:flex-row w-full justify-between gap-2",children:[(0,i.jsx)(d.Z,{className:"flex-1",onChange:function(e){return v((0,s.Z)((0,a.Z)({},f),{address1:e}))},value:(null===f||void 0===f?void 0:f.address1)||"",label:"Address line 1",placeholder:"Address line 1"}),(0,i.jsx)(d.Z,{className:"flex-1",onChange:function(e){return v((0,s.Z)((0,a.Z)({},f),{address2:e}))},value:(null===f||void 0===f?void 0:f.address2)||"",label:"Address line 2",placeholder:"Address line 2"})]}),(0,i.jsxs)("div",{className:"flex flex-col md:flex-row w-full justify-between gap-2",children:[(0,i.jsx)(m.Z,{className:"flex-1",value:u.hW.find((function(e){var n;return e.code===(null===f||void 0===f||null===(n=f.country)||void 0===n?void 0:n.toUpperCase())})),onChange:function(e){v((0,s.Z)((0,a.Z)({},f),{country:e.code}))},values:u.hW,label:"Country",hasFilter:!0}),(0,i.jsx)(d.Z,{className:"flex-1",size:2,onChange:function(e){return v((0,s.Z)((0,a.Z)({},f),{state:e}))},value:(null===f||void 0===f?void 0:f.state)||"",label:"".concat("ca"===(null===f||void 0===f||null===(l=f.country)||void 0===l?void 0:l.toLowerCase())?"Province":"State"," (eg: TX, BC)"),placeholder:"State"})]}),(0,i.jsxs)("div",{className:"flex flex-col md:flex-row w-full justify-between gap-2",children:[(0,i.jsx)(d.Z,{className:"flex-1",onChange:function(e){return v((0,s.Z)((0,a.Z)({},f),{city:e}))},value:(null===f||void 0===f?void 0:f.city)||"",label:"City",placeholder:"City"}),(0,i.jsx)(d.Z,{className:"flex-1",onChange:function(e){return v((0,s.Z)((0,a.Z)({},f),{postalCode:e}))},value:(null===f||void 0===f?void 0:f.postalCode)||"",label:"Postal code",placeholder:"Postal code",error:(null===j||void 0===j?void 0:j.postalCode)&&(null===j||void 0===j?void 0:j.postalCode)})]})]})]})})}},63553:function(e,n,l){l.d(n,{Z:function(){return S}});var t=l(47568),a=l(26042),s=l(69396),i=l(10253),o=l(97582),r=l(85893),c=l(11355),d=l(37882),u=l(67294),m=(l(41664),l(33299)),f=l(26713),v=l(25675),x=l.n(v),p=l(3732),h=l(86998),g=l(27599),y=l(86383),j=l(40053),w=l(52077),b=l(11163),N=l(4156),Z=l(55669),C=(l(40735),l(61437));function S(e){var n,l,v,S=e.open,k=e.setOpen,F=e.domain,T=e.refresh,_=e.showSuggestion,A=(0,j.Z)(),I=A.get,D=A.post,E=(0,m.useSession)().data,P=(0,b.useRouter)(),R=(0,u.useState)({}),U=R[0],L=R[1],O=(0,u.useState)(!0),z=O[0],K=O[1],G=(0,u.useState)([]),V=G[0],M=G[1],q=(0,u.useState)(""),B=(q[0],q[1],(0,u.useState)(null)),Y=B[0],W=(B[1],(null===E||void 0===E||null===(n=E.user)||void 0===n||null===(l=n.plan)||void 0===l||null===(v=l.limits)||void 0===v?void 0:v.customDomain)||0),X=(0,u.useState)(!0),$=X[0],H=X[1],J=(0,u.useState)(_?"suggestion":"purchase"),Q=J[0],ee=J[1],ne=(0,u.useState)(!1),le=ne[0],te=ne[1],ae=(0,u.useState)(!1),se=ae[0],ie=ae[1],oe=(0,u.useState)(F),re=oe[0],ce=oe[1],de=(0,u.useState)(!1),ue=de[0],me=de[1],fe=(0,u.useState)(!1),ve=fe[0],xe=fe[1],pe=((0,i.Z)((0,C.Z)("support.modal",!1),2)[1],function(){var e=(0,t.Z)((function(e){var n,l;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return te(!0),[4,D("/custom-domain/register",{domain:e,extraInformation:null,registrant:!1!==$?null:U})];case 1:return(n=t.sent())&&!0===n.status?(p.Z9.success("Domain registered successfully!"),ee("result")):(null===n||void 0===n?void 0:n.refresh)?(p.Z9.error(null!==(l=null===n||void 0===n?void 0:n.message)&&void 0!==l?l:"Domain not available"),setTimeout((function(){P.reload()}),2e3)):p.Z9.error((null===n||void 0===n?void 0:n.message)||"Something went wrong, please try again later."),te(!1),[2]}}))}));return function(n){return e.apply(this,arguments)}}()),he=(function(){var e=(0,t.Z)((function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return te(!0),[4,D("custom-domain/pre-register",{domain:null===re||void 0===re?void 0:re.domain,price:null===re||void 0===re?void 0:re.price,contact:!1!==$?null:U,paymentId:Y,extraInformation:null})];case 1:return(e=n.sent())&&!0===e.status?(p.Z9.success("Domain registration process was started!"),k(!1)):p.Z9.error((null===e||void 0===e?void 0:e.message)||"Something went wrong, please try again later."),te(!1),[2]}}))}))}(),function(){var e=(0,t.Z)((function(e){var n,l,t;return(0,o.__generator)(this,(function(a){switch(a.label){case 0:return n=e.id,l=e.amount,[4,D("custom-domain/ack-payment",{domain:null===re||void 0===re?void 0:re.domain,paymentId:n,amount:l})];case 1:return(t=a.sent())&&!0===t.status&&(me(!0),pe(null===re||void 0===re?void 0:re.domain)),[2]}}))}));return function(n){return e.apply(this,arguments)}}()),ge=function(){var e=(0,t.Z)((function(){return(0,o.__generator)(this,(function(e){return(null===re||void 0===re?void 0:re.price)>W?(te(!0),ie(!0)):pe(null===re||void 0===re?void 0:re.domain),[2]}))}));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=(0,t.Z)((function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,I("/custom-domain/contact-details")];case 1:return!0===(null===(e=n.sent())||void 0===e?void 0:e.status)&&(null===e||void 0===e?void 0:e.content)&&L((0,s.Z)((0,a.Z)({},e.content),{countryPhoneCode:e.content.country})),[2]}}))}));return function(){return e.apply(this,arguments)}}(),je=function(){var e=(0,t.Z)((function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,I("/custom-domain/locations")];case 1:return!0===(null===(e=n.sent())||void 0===e?void 0:e.status)&&(null===e||void 0===e?void 0:e.content)&&M(e.content),[2]}}))}));return function(){return e.apply(this,arguments)}}(),we=function(){var e,n,l,t=(null===E||void 0===E||null===(e=E.user)||void 0===e||null===(n=e.plan)||void 0===n||null===(l=n.limits)||void 0===l?void 0:l.customDomain)||0;return(null===re||void 0===re?void 0:re.price)-t};return(0,u.useEffect)((function(){S&&(ye(),je())}),[S]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(c.u.Root,{show:S,as:u.Fragment,children:(0,r.jsx)(d.V,{static:!0,open:S&&!ve,as:"div",className:"fixed z-100 md:inset-0 w-full h-full overflow-hidden bottom-0",onClose:function(){return console.log("")},children:(0,r.jsxs)("div",{className:"flex items-end justify-center text-center md:block",children:[(0,r.jsx)(c.u.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)(d.V.Overlay,{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity"})}),(0,r.jsx)("span",{className:"hidden md:inline-block md:align-middle md:h-screen","aria-hidden":"true",children:"\u200b"}),(0,r.jsx)(c.u.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",enterTo:"opacity-100 translate-y-0 md:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 md:scale-100",leaveTo:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",children:(0,r.jsx)("div",{className:"px-4 md:px-18 inline-block align-middle w-full bg-white text-left shadow-xl transform transition-all",children:(0,r.jsxs)("div",{className:"flex flex-col h-dyn overflow-y-hidden pt-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between md:py-5 md:px-6",children:[(0,r.jsx)("div",{className:"relative w-10 h-10",children:(0,r.jsx)(x(),{src:(0,p.sd)("durable-icon-primary.svg"),layout:"fill",objectFit:"fill",alt:"Sorry, unexpected error"})}),"result"!==Q&&(0,r.jsx)("button",{type:"button",className:"bg-white rounded-md text-gray-600 transition-all hover:text-gray-400 focus:border-1 focus:ring-indigo-500 focus:border-indigo-500",onClick:function(){return k(!1)},children:(0,r.jsx)(f.Z,{icon:"XSolidIcon",className:"h-6 w-6","aria-hidden":"true"})})]}),(0,r.jsxs)("div",{className:"flex justify-center flex-1 overflow-y-hidden",children:["suggestion"===Q&&(0,r.jsx)("div",{className:"md:pr-6 w-full md:w-170",children:(0,r.jsx)(N.Z,{seeMoreSteps:10,externalDomainSelectionAction:function(e){return function(e){ce(e),ee("purchase")}(e)},onAction:function(){},fullheight:!0,refresh:function(){},onPaywall:function(){return xe(!0)}})}),"purchase"===Q&&(0,r.jsx)(c.u,{as:u.Fragment,show:"purchase"===Q,appear:!0,enter:"transition-all duration-600",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-all duration-600",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"bg-white w-full md:w-170 pb-4 mt-2 lg:pb-6 overflow-y-hidden flex flex-col gap-6",children:(0,r.jsxs)("div",{className:"flex flex-col justify-between overflow-y-hidden ",children:[(0,r.jsxs)("div",{className:"flex flex-col pr-4 lg:pr-6",children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:"Get your domain"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Add contact details to get your domain"})]}),(0,r.jsxs)("div",{className:"flex justify-between mt-4 pr-4 lg:pr-6",children:[(0,r.jsx)("p",{className:"text-sm font-semibold",children:null===re||void 0===re?void 0:re.domain}),(0,r.jsx)("p",{className:"flex gap-2 text-sm",children:function(e){var n,l,t,a,s,i=(null===E||void 0===E||null===(n=E.user)||void 0===n||null===(l=n.plan)||void 0===l||null===(t=l.limits)||void 0===t?void 0:t.customDomain)||0;if("free"!==(null===E||void 0===E||null===(a=E.user)||void 0===a||null===(s=a.plan)||void 0===s?void 0:s.priceId))return e>i?(0,r.jsx)("span",{className:"text-gray-900 font-semibold",children:(0,h.T)(we())}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"text-gray-400 line-through",children:[(0,h.T)(null===re||void 0===re?void 0:re.price)," / Year"]}),(0,r.jsx)("span",{className:"text-gray-900 font-medium",children:"FREE"})]})}(null===re||void 0===re?void 0:re.price)})]}),(0,r.jsx)("div",{className:"my-4 border-b-1 pr-4 lg:pr-6"}),(0,r.jsx)("div",{className:"overflow-y-scroll !p-0 main-scrollbar overflow-x-hidden flex-1",children:(0,r.jsxs)("div",{className:"pr-4 lg:pr-6",children:[(0,r.jsxs)("div",{className:"flex mb-4 items-center p-4 gap-4 bg-blue-50 rounded-xl px-4 lg:px-6",children:[(0,r.jsx)(f.Z,{icon:"InformationCircleSolidIcon",className:"h-5 w-5 flex-shrink-0 text-blue-800"}),(0,r.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"This domain may take a few minutes to several hours to activate."})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("p",{className:"font-semibold",children:"Contact details"}),(0,r.jsxs)("div",{className:"flex justify-between items-center gap-4 mt-4",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:"Easy setup"}),(0,r.jsx)("p",{className:"text-sm",children:"You still own the domain but it will be registered under Durable\u2019s name"})]}),(0,r.jsx)(g.Z,{enabled:$,onChange:function(e){return H(e)}})]})]}),!$&&(0,r.jsx)(y.Z,{contactDetails:U,setContactDetails:L,setValidForm:K,domain:null===re||void 0===re?void 0:re.domain,locations:V,show:!$}),(null===re||void 0===re?void 0:re.price)>W&&!ue&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"border-t w-full py-2"}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 pb-6",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:"Payment method"}),(0,r.jsx)("p",{className:"text-lg font-medium",children:(0,h.T)(we())}),(0,r.jsx)(Z.Z,{amount:(null===re||void 0===re?void 0:re.price)-W,metadata:null===re||void 0===re?void 0:re.domain,loading:le,submit:se,disabled:z,onSuccess:function(e){he(e)},onFailure:function(){te(!1),ie(null)}})]})]})]})})]})})}),"result"===Q&&(0,r.jsx)(c.u,{as:u.Fragment,show:"result"===Q,appear:!0,enter:"transition-all duration-600",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-all duration-600",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"flex flex-1 items-center justify-center w-full h-full",children:(0,r.jsxs)("div",{className:"flex flex-col w-full md:w-170 items-center",children:[(0,r.jsx)("div",{className:"relative w-full h-60 flex flex-row justify-center items-center min-h-30",children:(0,r.jsx)(x(),{src:(0,p.sd)("domain/ilustration-domain-success.png"),alt:"Add service",title:"Add service",width:680,height:272})}),(0,r.jsxs)("div",{className:"w-full md:w-140 flex flex-col items-center",children:[(0,r.jsxs)("p",{className:"text-2xl font-bold text-black mt-8 text-center",children:[null===re||void 0===re?void 0:re.domain," is now yours!"]}),(0,r.jsx)("p",{className:"text-gray-900 mt-3 text-center",children:"This domain name will be what customers see when visiting your website."}),(0,r.jsxs)("div",{className:"flex gap-3 bg-yellow-50 p-4 text-yellow-800 mt-5",children:[(0,r.jsx)(f.Z,{icon:"ExclamationTriangleIcon",className:"text-yellow-600 h-5 w-5 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:"Because of how the internet works, domain setup can take a few hours. In rare cases, up to 48 hours."}),(0,r.jsx)("p",{className:"text-sm",children:"We\u2019ll send you an email when your domain is ready."})]})]})]})]})})})]}),("purchase"===Q||"result"===Q)&&(0,r.jsxs)("div",{className:"sticky left-0 right-0 bottom-0 z-50 flex items-center py-4 px-4 md:px-18 w-full border-t ",children:["purchase"===Q&&(0,r.jsxs)("div",{className:"flex flex-1 justify-between",children:[(0,r.jsxs)(w.Z,{className:"light flex gap-2",disabled:le,onClick:function(){return"purchase"===Q?k(!1):ee("purchase")},children:[(0,r.jsx)(f.Z,{icon:"ArrowLeftSolidIcon",className:"h-4 w-4 flex-shrink-0 text-gray-500"}),"Back"]}),(0,r.jsx)(w.Z,{disabled:!$&&!z,loading:le,onClick:ge,className:"primary",children:"Get domain"})]})," ","result"===Q&&(0,r.jsx)("div",{className:"flex flex-1 justify-end",children:(0,r.jsx)(w.Z,{onClick:function(){T(),k(!1)},className:"primary",children:"Done"})})]})]})})})]})})})})}},4156:function(e,n,l){var t,a=l(47568),s=l(10253),i=l(29815),o=l(97582),r=l(85893),c=l(67294),d=l(33299),u=l(61437),m=l(11163),f=l(86998),v=l(51121),x=(l(64955),l(41664)),p=l.n(x),h=l(63553),g=l(46902),y=(l(40735),l(16494)),j=l(26713),w=l(3732),b=l(52077),N=l(40053),Z=l(19645);n.Z=function(e){e.className;var n,l,x,C,S,k,F,T,_,A,I,D=e.seeMoreSteps,E=(e.setOpenGetDomainDrawer,e.onAction,e.refresh),P=e.externalDomainSelectionAction,R=e.onPaywall,U=e.fullheight,L=void 0!==U&&U,O=(e.trackEvent,e.disableSeeMore),z=void 0!==O&&O,K=e.fromBuilder,G=void 0!==K&&K,V=(0,s.Z)((0,u.Z)("layout.paywall",!1),2),M=(V[0],V[1]),q=(0,c.useState)(!1),B=q[0],Y=q[1],W=(0,d.useSession)().data,X=(0,m.useRouter)(),$=(0,c.useState)([]),H=$[0],J=$[1],Q=(0,c.useState)([]),ee=Q[0],ne=Q[1],le=(0,c.useState)(null),te=(le[0],le[1],(0,c.useState)(!1)),ae=te[0],se=te[1],ie=(0,c.useState)(null!==(I=null!==(A=sessionStorage.getItem("domain_to_claim"))&&void 0!==A?A:null===W||void 0===W||null===(n=W.business)||void 0===n?void 0:n.name)&&void 0!==I?I:null),oe=ie[0],re=ie[1],ce=(0,c.useState)(null),de=ce[0],ue=ce[1],me=(0,c.useState)(null),fe=me[0],ve=me[1],xe=(0,c.useState)(!1),pe=xe[0],he=xe[1],ge=(0,Z.Z)().track,ye=(0,N.Z)().get,je=(0,c.useRef)(),we=function(){var e=(0,a.Z)((function(){return(0,o.__generator)(this,(function(e){return ne([]),ye("/custom-domain/suggestion",{term:oe}).then((function(e){e&&!0===e.status&&e.content&&ne(e.content)})),[2]}))}));return function(){return e.apply(this,arguments)}}(),be=function(){var e=(0,a.Z)((function(e){var n;return(0,o.__generator)(this,(function(l){switch(l.label){case 0:return[4,ye("/custom-domain/check-domain",{domain:e})];case 1:return(n=l.sent())&&!0===n.status&&n.content?"available"===n.content.status.toLowerCase()?[2,!0]:[2,!1]:[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Ne=function(){J((function(e){return(0,i.Z)(e).concat((0,i.Z)(ee.slice(e.length,(null===e||void 0===e?void 0:e.length)+D)))})),setTimeout((function(){var e;null===(e=je.current)||void 0===e||e.scrollTo(0,9999999)}),300)},Ze=function(){var e=(0,a.Z)((function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return he(!0),J([]),ne([]),[4,ye("/custom-domain/check-domain",{domain:oe})];case 1:return(e=n.sent())&&!0===e.status&&e.content&&(ke(oe)&&ve(e.content),we()),he(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),Ce=function(e,n){var l,t;return(0,r.jsxs)("div",{className:(0,w.AK)("gap-2",(null===e||void 0===e||null===(l=e.status)||void 0===l||l.toLowerCase(),""),"flex items-center justify-between py-3"),children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-1 md:gap-4",children:[(0,r.jsx)("div",{className:"flex gap-2 md:gap-4",children:(0,r.jsx)("p",{className:"text-gray-900 text-sm font-semibold break-all",children:e.domain})}),(0,r.jsx)("div",{className:"flex gap-2 items-center",children:(0,r.jsx)("p",{className:"flex md:hidden",children:Se(e.price)})})]}),"available"===(null===e||void 0===e||null===(t=e.status)||void 0===t?void 0:t.toLowerCase())?(0,r.jsxs)("div",{className:"flex flex-wrap flex-shrink-0 gap-4 items-center",children:[(0,r.jsx)("p",{className:"hidden md:flex font-semibold text-gray-900",children:Se(e.price)}),(0,r.jsx)(b.Z,{className:"light lg flex-shrink-0",disabled:ae,onClick:function(){var n,l,t,a;ge("app:custom-domain-get-it",{domain:e,plan:null===W||void 0===W||null===(n=W.user)||void 0===n||null===(l=n.plan)||void 0===l?void 0:l.name}),"free"===(null===W||void 0===W||null===(t=W.user)||void 0===t||null===(a=t.plan)||void 0===a?void 0:a.priceId)?G?R("publish"):("function"===typeof R&&R(!0),M(!0),ge("account:paywall-click",{context:"custom_domain_get_it",page:null===X||void 0===X?void 0:X.pathname})):(se(!0),be(e.domain).then((function(n){n?P?P(e):ue(e):w.Z9.error("Sorry, the domain ".concat(e.domain," is not available anymore. Please try another domain.")),se(!1)})))},children:" Get it"})]}):(0,r.jsx)("div",{className:"flex flex-wrap flex-shrink-0 gap-4 items-center",children:(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Unavailable"})})]},"custom-domain-".concat(n))},Se=function(e){var n,l,t,a,s,i=(null===W||void 0===W||null===(n=W.user)||void 0===n||null===(l=n.plan)||void 0===l||null===(t=l.limits)||void 0===t?void 0:t.customDomain)||0;if("free"!==(null===W||void 0===W||null===(a=W.user)||void 0===a||null===(s=a.plan)||void 0===s?void 0:s.priceId))return e>i?(0,r.jsxs)("p",{className:"text-sm font-semibold",children:[(0,f.T)(e-i)," / Year"]}):(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsxs)("span",{className:"text-gray-400 line-through",children:[(0,f.T)(e)," ",(0,r.jsx)("span",{className:"text-gray-400 font-medium",children:"/ Year"})]}),"\xa0\xa0",(0,r.jsx)("span",{className:"text-gray-900 font-medium",children:"FREE"})]})};(0,c.useEffect)((function(){ee.length>0&&0===(null===H||void 0===H?void 0:H.length)&&Ne()}),[ee]);var ke=function(e){return/^[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/gm.test(e)&&/^[A-Za-z0-9]/gm.test(e)};return(0,c.useEffect)((function(){we()}),[]),(0,c.useEffect)((function(){return clearTimeout(t),t=setTimeout((function(){var e;""!==oe&&oe!==(null===W||void 0===W||null===(e=W.business)||void 0===e?void 0:e.name)&&Ze()}),1e3),function(){clearTimeout(t)}}),[oe]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:(0,w.AK)("flex flex-col h-full w-full md:w-auto",L?"pb-20":""),children:[G?(0,r.jsxs)("div",{className:"flex flex-col gap-2 mb-4 pr-2 md:pr-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-2",children:[(0,r.jsx)("p",{className:"font-semibold text-sm text-gray-900",children:"Get a custom domain"}),(0,r.jsx)(p(),{href:"https://help.durable.co/en/articles/8482634-domain-policy-faqs/",children:(0,r.jsxs)("a",{className:"max-w-[130px] flex gap-1 items-center text-sm font-medium text-indigo-700 ",target:"_blank",rel:"noreferrer",children:["Domain policy ",(0,r.jsx)(j.Z,{icon:"ArrowTopRightOnSquareIcon",className:"w-4 h-4 text-indigo-600"})]})})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Find the perfect domain name for your business."})]}):(0,r.jsxs)("div",{className:(0,w.AK)("mb-6 pr-2 md:pr-6"),children:[(0,r.jsxs)("div",{className:"flex justify-between gap-2 items-center",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:"Get a domain name"}),"free"===(null===W||void 0===W||null===(l=W.user)||void 0===l||null===(x=l.plan)||void 0===x?void 0:x.priceId)&&(0,r.jsx)("span",{className:"badge bg-yellow-100 text-yellow-800",children:"PRO"})]}),0!==(null===W||void 0===W||null===(C=W.user)||void 0===C||null===(S=C.plan)||void 0===S||null===(k=S.limits)||void 0===k?void 0:k.customDomain)&&(0,r.jsx)("div",{className:"flex justify-between gap-2 mt-1 mb-4",children:(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Get a domain FREE\u2014up to $",(null===W||void 0===W||null===(F=W.user)||void 0===F||null===(T=F.plan)||void 0===T||null===(_=T.limits)||void 0===_?void 0:_.customDomain)||0,"!"]})}),(0,r.jsx)(p(),{href:"https://help.durable.co/en/articles/8482634-domain-policy-faqs/",children:(0,r.jsxs)("a",{className:"max-w-[130px] flex gap-1 items-center text-sm font-medium text-indigo-700 ",target:"_blank",rel:"noreferrer",children:["Domain policy ",(0,r.jsx)(j.Z,{icon:"ArrowTopRightOnSquareIcon",className:"w-4 h-4 text-indigo-600"})]})})]}),(0,r.jsxs)("div",{className:(0,w.AK)("relative w-full  mb-4 pr-2 md:pr-6"),children:[(0,r.jsx)("span",{className:"absolute top-0 z-10 pl-2.5 py-2",children:(0,r.jsx)(j.Z,{icon:"SearchIcon",className:"w-5 h-5"})}),(0,r.jsx)(v.Z,{value:oe,onKeyUp:function(e){return"Enter"===e.key&&Ze()},onChange:function(e){return re(null===e||void 0===e?void 0:e.toLowerCase())},className:"flex-1 w-full",inputClassName:"!pl-9 !pr-9 !py-2 md:!py-2.5",placeholder:"Search for a domain name"}),(0,r.jsx)("span",{className:"absolute top-0 z-10 right-0 mr-4 md:mr-10 py-2",children:(0,r.jsx)(j.Z,{onClick:function(){re(""),ne([]),J([]),J([]),setTimeout((function(){Ze()}),300)},icon:"XCircleIcon",from:"heroicons",className:"w-5 h-5 cursor-pointer"})})]}),(0,r.jsx)("div",{ref:je,className:(0,w.AK)("!py-0 scroll-smooth grid body-large transition-all duration-500  overflow-y-scroll pr-2"),style:{gridTemplateRows:H.length>0?"1fr":"0fr"},children:0===H.length||pe?(0,r.jsxs)("div",{className:"flex items-start-start flex-col gap-4 pb-4",children:[(0,r.jsx)(y.Z,{classNameChild:"h-10",variant:"skeleton"}),(0,r.jsx)(y.Z,{classNameChild:"h-10",variant:"skeleton"}),(0,r.jsx)(y.Z,{classNameChild:"h-10",variant:"skeleton"})]}):(0,r.jsxs)("div",{className:(0,w.AK)(L?"flex-1 ":"max-h-100","flex flex-col  divide-y"),children:[fe&&Ce(fe,0),H.map((function(e,n){return Ce(e,n)}))]})}),(null===ee||void 0===ee?void 0:ee.length)>0&&H.length!==ee.length&&!z&&(0,r.jsx)("div",{className:(0,w.AK)("flex gap-2 rounded-lg items-center cursor-pointer mt-4"),children:(0,r.jsx)("p",{onClick:function(){return Ne()},className:"text-sm font-medium text-indigo-600",children:"View more suggestions"})})]}),(0,r.jsx)(g.Z,{visible:B,onClose:function(){return Y(!1)},onAction:function(){G?R(!0):M(!0),Y(!1)}}),de&&(0,r.jsx)(h.Z,{refresh:E,domain:de,open:!!de,setOpen:function(){return ue(null)}})]})}}}]);